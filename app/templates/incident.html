{% extends "base.html" %}

{% block content %}
<a href="{{ url_for('main.index') }}">&larr; Voltar para lista</a>
<article>
    <h2>{{ incident.title }}</h2>
    <p class="date">Data: {{ incident.date.strftime('%d/%m/%Y %H:%M') if incident.date else 'Desconhecida' }}</p>
    <p class="location">
        Local: 
        {% if incident.street %}{{ incident.street }}, {% endif %}
        {% if incident.neighborhood %}{{ incident.neighborhood }}{% if incident.city or incident.state %}, {% endif %}{% endif %}
        {% if incident.city %}{{ incident.city }}{% if incident.state %}, {% endif %}{% endif %}
        {% if incident.state %}{{ incident.state }}{% if incident.country %}, {% endif %}{% endif %}
        {% if incident.country %}{{ incident.country }}{% endif %}
        {% if incident.location_extra_info %}<br><small>({{ incident.location_extra_info }})</small>{% endif %}
    </p>
    <hr>
    <div class="description">
        <p>{{ incident.description }}</p>
    </div>

    {% if incident.extractions %}
    <h3>Fontes &amp; Extrações</h3>
    <ul>
        {% for extraction in incident.extractions %}
        <li>
            <strong>Fonte:</strong> <a href="{{ extraction.source.resolved_url or extraction.source.url }}" target="_blank" rel="noopener noreferrer">{{ extraction.source.resolved_url or extraction.source.url
                }}</a><br>
            <strong>Confiança:</strong> {{ extraction.confidence_score }}<br>
            <strong>Resumo:</strong> {{ extraction.summary }}
        </li>
        {% endfor %}
    </ul>
    {% endif %}
</article>
{% endblock %}