{% extends "base.html" %}

{% block content %}
<article class="card">
    <div class="card-body">
        <h2 class="mb-4">Download da Base de Dados</h2>

        <section class="mb-4">
            <p class="lead">
                Faça o download da base completa de incidentes de violência em diferentes formatos.
            </p>
            <p>
                A base contém <strong>{{ total_incidents }}</strong> incidentes registrados até o momento.
            </p>
        </section>

        <section class="mb-4">
            <h3 class="mb-3">Formatos Disponíveis</h3>
            
            <div class="row g-3">
                <div class="col-md-6">
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-filetype-csv" viewBox="0 0 16 16" style="vertical-align: middle; margin-right: 8px;">
                                    <path fill-rule="evenodd" d="M14 4.5V14a2 2 0 0 1-2 2v-1a1 1 0 0 0 1-1V4.5h-2A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v9H2V2a2 2 0 0 1 2-2h5.5zM1.5 1.5a.5.5 0 0 0-.5.5v12a.5.5 0 0 0 .5.5h11a.5.5 0 0 0 .5-.5V2a.5.5 0 0 0-.5-.5zM2.5 3a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1zm0 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1zm0 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1zm0 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1zm0 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1zm4-8a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1zm0 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1zm0 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1zm0 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1zm0 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1z"/>
                                </svg>
                                CSV
                            </h5>
                            <p class="card-text">
                                Formato de planilha compatível com Excel, Google Sheets e outras ferramentas de análise de dados.
                            </p>
                            <p class="card-text">
                                <small class="text-muted">
                                    Inclui todos os campos: ID, título, data, localização, vítimas, descrição, número de mortes, etc.
                                </small>
                            </p>
                            <a href="/api/download/incidents?format=csv" class="btn btn-primary mt-2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-download" viewBox="0 0 16 16" style="vertical-align: middle; margin-right: 4px;">
                                    <path d="M.5 9.9a.5.5 0 0 1 .5.5h2.5a.5.5 0 0 1 0 1H3a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a.5.5 0 0 1 0 1H3v8h-.5a.5.5 0 0 1-.5-.5z"/>
                                    <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"/>
                                </svg>
                                Baixar CSV
                            </a>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-filetype-json" viewBox="0 0 16 16" style="vertical-align: middle; margin-right: 8px;">
                                    <path fill-rule="evenodd" d="M14 4.5V14a2 2 0 0 1-2 2v-1a1 1 0 0 0 1-1V4.5h-2A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v9H2V2a2 2 0 0 1 2-2h5.5zM1.5 1.5a.5.5 0 0 0-.5.5v12a.5.5 0 0 0 .5.5h11a.5.5 0 0 0 .5-.5V2a.5.5 0 0 0-.5-.5zM2.5 3a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1zm0 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1zm0 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1zm0 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1zm4-8a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1zm0 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1zm0 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1zm0 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1z"/>
                                </svg>
                                JSON
                            </h5>
                            <p class="card-text">
                                Formato JSON estruturado, ideal para desenvolvedores e integração com outras aplicações.
                            </p>
                            <p class="card-text">
                                <small class="text-muted">
                                    Dados em formato JSON com indentação, incluindo todos os campos e coordenadas geográficas.
                                </small>
                            </p>
                            <a href="/api/download/incidents?format=json" class="btn btn-primary mt-2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-download" viewBox="0 0 16 16" style="vertical-align: middle; margin-right: 4px;">
                                    <path d="M.5 9.9a.5.5 0 0 1 .5.5h2.5a.5.5 0 0 1 0 1H3a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a.5.5 0 0 1 0 1H3v8h-.5a.5.5 0 0 1-.5-.5z"/>
                                    <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"/>
                                </svg>
                                Baixar JSON
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="mb-4">
            <h3 class="mb-3">Campos Incluídos</h3>
            <div class="row">
                <div class="col-md-6">
                    <ul>
                        <li><strong>ID:</strong> Identificador único do incidente</li>
                        <li><strong>Título:</strong> Título do incidente</li>
                        <li><strong>Data:</strong> Data e hora do incidente</li>
                        <li><strong>Vítimas:</strong> Nome das vítimas (quando disponível)</li>
                        <li><strong>Localização:</strong> País, estado, cidade, bairro, rua</li>
                        <li><strong>Coordenadas:</strong> Latitude e longitude (quando disponível)</li>
                    </ul>
                </div>
                <div class="col-md-6">
                    <ul>
                        <li><strong>Precisão da Localização:</strong> Nível de precisão do geocoding</li>
                        <li><strong>Descrição:</strong> Descrição completa do incidente</li>
                        <li><strong>Confirmado:</strong> Se o incidente foi confirmado</li>
                        <li><strong>Número de Mortes:</strong> Quantidade de vítimas fatais</li>
                        <li><strong>Número de Fontes:</strong> Quantas fontes reportaram o incidente</li>
                        <li><strong>Informações Extras:</strong> Informações adicionais sobre a localização</li>
                    </ul>
                </div>
            </div>
        </section>

        <section>
            <h3 class="mb-3">Licença e Uso</h3>
            <p>
                Os dados são disponibilizados para uso público e podem ser utilizados para pesquisa, análise e desenvolvimento de políticas públicas.
            </p>
            <p>
                <strong>Importante:</strong> Os dados são coletados automaticamente e podem conter erros. Sempre verifique as informações antes de usar em análises críticas.
            </p>
        </section>
    </div>
</article>
{% endblock %}








